colors: true
skip_output: [meta, success]

#---------------------------------------------
# Pre-commit checks
#---------------------------------------------
pre-commit:
  parallel: true
  commands:
    lint:
      glob: "*.{ts,tsx}"
      run: |
        echo "ğŸ” Linting code..."
        pnpm lint
      skip: [merge, rebase]

    typecheck:
      glob: "*.{ts,tsx}"
      run: |
        echo "ğŸ” Type checking..."
        pnpm type-check
      skip: [merge, rebase]

    validate:
      run: |
        echo "âœ… Running validation..."
        pnpm validate
      skip: [merge, rebase]

    no-debug:
      glob: "*.{ts,tsx}"
      run: |
        echo "ğŸ› Checking for debug code..."
        if grep -l "console.log\|debugger" {staged_files}; then
          echo "âš ï¸ Debug code detected in staged files!"
          exit 1
        fi

#---------------------------------------------
# Commit message validation
#---------------------------------------------
commit-msg:
  parallel: true
  commands:
    commitlint:
      run: |
        echo "ğŸ“ Validating commit message..."
        pnpm dlx commitlint --edit "$1"
